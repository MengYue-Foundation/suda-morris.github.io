
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>WenRis Blog</title>
	<meta name="author" content="suda-morris">

	
	<meta name="description" content="WenRis Blog">
	<meta name="keywords" content="C/C++,Python,Lua">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="WenRis Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">WenRis Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/blog/categories">Categories</a></li>
	<li><a href="/aboutme">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/blog/categories">Categories</a></li>
	<li><a href="/aboutme">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.baidu.com" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:suda-morris.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/Morris1106com" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/suda-morris" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.baidu.com" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:suda-morris.github.io">
	</form>
</nav>

</header>
	
		
	

	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/11/11/matlab/">
		
			Matlab基础知识</a>
	</h2>
	<div class="entry-content">
		<h2>几个常用命令</h2>

<ol>
<li>help：查看某个命令的帮助文档</li>
<li>version：获得当前Matlab的版本</li>
<li>pwd：给出当前的工作目录名</li>
<li>dir：ls或dir列出当前目录下的所有文件名清单</li>
<li>cd：改变目录</li>
<li>what：列出当前工作目录下所有的M文件、MAT文件和MEX文件</li>
<li>who：列出当前工作空间里的变量名</li>
<li>clock：时钟设置命令</li>
<li>data：日期设置命令</li>
<li>path：显示MATLAB的当前搜索路径</li>
<li>getenv：getenv（‘matlabpath’）显示当前的MATLAB路径</li>
<li>diary on，diary off：利用diary可以记录MATLAB窗口中进行的所有操作</li>
<li>！（escape）：符号！是MATLAB的扩展运算符，通过该符号，用户有权使用DOS或UNIX命令</li>
<li>demo：该命令引导使用者通过菜单选择为数众多的演示程序</li>
<li>format：数据显示格式。系统默认的数据显示格式是5位</li>
<li>clear：清除工作空间中所有的变量</li>
<li>clear all：从工作空间中清除所有变量和函数</li>
<li>clf：清除图形窗口内容</li>
<li>delete&lt;文件名>：从磁盘中删除指定文件</li>
<li>load name：载入‘name’文件中的所有变量到工作空间</li>
<li>load name x y：载入‘name’文件中的变量x，y到工作空间</li>
<li>save name：保存工作空间变量到文件name.mat中</li>
<li>save name x y：保存工作空间变量x y到文件name.mat中</li>
<li>pack：整理工作空间内存</li>
<li>size：显示当前工作空间中变量的尺寸</li>
<li>length：显示当前工作空间中变量的长度</li>
<li>disp：显示当前工作空间中的变量</li>
</ol>


<h2>运算符</h2>

<ul>
<li>反除运算符：:该运算符得到商的倒数，即a\b等于b/a</li>
<li>不等于：~=</li>
<li>逻辑与：&amp;</li>
<li>逻辑或：|</li>
<li>逻辑非：~</li>
</ul>


<h2>变量名</h2>

<ol>
<li>区分大小写</li>
<li>长度不能超过31位</li>
<li>变量名以字母开头，可以是字母、数字、下划线组成</li>
</ol>


<h2>分支结构</h2>

<blockquote><p>if-else-end语句中的else子句是可选项
嵌套：if-elseif-elseif-&hellip;-else-end</p></blockquote>

<h2>循环结构</h2>

<blockquote><p>for-end
while-end；该语句中的循环判断语句为矩阵时，当且仅当所有的矩阵元素非零时，逻辑表达式的值为真
break；退出循环体，执行循环后的其他语句</p></blockquote>

<h2>数据输入与输出</h2>

<ol>
<li>input：通过键盘输入数据</li>
<li>fprintf：输出格式化信息和数字</li>
<li>disp：可以在命令窗口输出数字、向量、矩阵或字符串，无需变量名</li>
<li>sprintf：将输出写入字符串</li>
</ol>


<h2>数组</h2>

<ol>
<li>MATLAB中，行数组与行向量是同义语，列数组和列向量是同义语</li>
<li>对于加法和减法，数组运算与线性代数中的向量运算相同。但是符号.*和./分别被称为数组乘法运算符和数组除法运算符，它们不同于矩阵和向量乘除法。</li>
<li>计算数组长度：length（x）</li>
<li>删除数组元素：z（3）=[]</li>
<li>MATLAB里，二维数组变量等同于一个矩阵，每一行的元素以分号结束</li>
<li>二维数组的整行或整列可以用一个冒号表示。例如：m(1,:)和m(:,3)分别表示m的第一列和第三列</li>
<li>只有长度相同的向量才能在if语句中进行比较，如果将两个长度不同的向量进行比较，命令窗口会出现出错信息提示。在if语句中比较字符串之前一定要通过增加空格使字符串长度完全相同</li>
</ol>


<h2>MATLAB特有的数字特性</h2>

<blockquote><p>在MATLAB里，所有的变量均为双精度，整数变量和实数变量之间没有区别，实数变量和复数变量同样也没有区别</p></blockquote>

<h2>初等数学函数</h2>

<ul>
<li>sin(x)</li>
<li>cos(x)</li>
<li>tan(x)</li>
<li>asin(x)</li>
<li>acos(x)</li>
<li>atan(x):[-π/2,π/2]</li>
<li>atan2(y,x):与atan(y/x)结果相同，但是-π/2≥atan2(y,x)≥π</li>
<li>sinh(x)</li>
<li>cosh(x)</li>
<li>tanh(x)</li>
<li>asinh(x)</li>
<li>acosh(x)</li>
<li>atanh(x)</li>
<li>abs(x):x的绝对值</li>
<li>angle(x):复数x的相位角</li>
<li>sqrt(x):x的平方根</li>
<li>real(x)</li>
<li>imag(x)</li>
<li>conj(x):复数x的共轭数</li>
<li>round(x):向最近整数取整</li>
<li>fix(x):向0取整</li>
<li>floor(x):向-∞取整</li>
<li>ceil(x):向+∞取整</li>
<li>sign(x):如果x>0,则为+1；如果x&lt;0,则为-1</li>
<li>mod(x,y)：除后余数：x-y*fix(x/y)</li>
<li>rem(x,y):除后余数：x-y*fix(x/y).如果y≤0，则与mod不同</li>
<li>exp(x):以e为底的指数</li>
<li>log(x):以e为底的对数</li>
<li>log10(x):以10为底的对数</li>
<li>factor(x):将x分解质因数</li>
<li>isprime(x):如果x为素数，值为1，否则为0</li>
<li>factorial(x):x!</li>
</ul>


<h2>功能函数</h2>

<ol>
<li>sort(x):将x按照升序重新排列,如果x是矩阵，则重新排列按列进行</li>
<li>sum(x):如果是x是矩阵，返回值由矩阵各列元素和组成的一个行向量</li>
<li>max(x),min(x):如果x是矩阵，函数值为一个行向量，每个元素为矩阵相应列的最大或最小值</li>
<li>rand(n),返回一个nxn的矩阵，元素全是随机数。除非特别规定，否则所生成的是0~1之间均匀分布的随机数</li>
<li>eval：该命令可以作为字符串被编辑，然后用eval执行。字符串可以通过input读取，或在程序中创建</li>
</ol>


<h2>M文件</h2>

<ol>
<li>M文件可以分为脚本文件和函数文件两种</li>
<li>脚本文件操作对象为MATLAB工作空间内的变量，并且在脚本执行结束后，脚本中对变量的一切操作均会被保留。在MATLAB语言中也可以在脚本内部定义变量，并且该变量将会自动地被加入到当前的MATLAB工作空间中，并可以为其他的脚本或函数引用，直到MATLAB被关闭或采用一定的命令将其删除</li>
<li>MATLAB语言的函数文件包含5个部分：

<ol>
<li>函数题头：指函数的定义行，是函数语句的第一行，在该行中将定义函数名，输入变量列表以及输出变量列表等</li>
<li>HI行：指函数帮助文档的第一行</li>
<li>帮助信息</li>
<li>函数体</li>
<li>注释部分：注释语句是以%引导的</li>
</ol>
</li>
<li>echo on,echo off:M文件执行过程中，其命令语句通常不出现在屏幕上，但是当echo on命令将echo开启后，屏幕上会显示所有语句。这时，用户可以看到正在执行的那部分M文件。</li>
<li>开发函数M文件最基本且很有效的一个办法是将第一行的函数语句用%注释掉，然后作为一个命令M文件进行测试。测试通过后，再将函数语句恢复</li>
</ol>


<h2>保存和载入数据</h2>

<ol>
<li>save，load：如果直接使用save，则所有当前变量将被保存到默认文件matlab.mat里。load是与save相反的命令，它取回所有被save保存的变量。</li>
<li>save file_name data-ascii：save能以ASCII码格式保存数据。带有ASCII选项的save和load非常重要，因为他们可以从MATLAB导入和导出数据</li>
<li>自动创建文件名：在一个M文件中，常常需要自动创建一些文件名。如果整条命令连同文件名写为一个字符串，则可通过eval执行。</li>
</ol>


<h2>硬拷贝</h2>

<ul>
<li>使用diary命令制作一个屏幕内容的拷贝，如果其后不加任何文件名，屏幕内容将存入名为diary的文件中，此文件可以用文本方式打开。但是在diary文件里无法得到图形</li>
</ul>


<h2>Matlab中的默认常量</h2>

<ol>
<li>pi：圆周率</li>
<li>inf：无穷大</li>
<li>nan：不定值，即0/0</li>
<li>realmax：最大正实数</li>
<li>realmin：最小正实数</li>
<li>eps：浮点数的相对误差</li>
<li>i：虚数单位</li>
<li>nargin：函数实际输入参数个数</li>
<li>nargout：函数实际输出参数个数</li>
<li>ans：默认变量名</li>
</ol>


<h2>常用矩阵函数运算</h2>

<ol>
<li>rot90（）：矩阵逆时针旋转90°</li>
<li>flipud（）：矩阵上下翻转</li>
<li>fliplr（）：矩阵左右翻转</li>
<li>flipdim（）：矩阵的某维元素翻转</li>
<li>shiftdim（）：矩阵的元素移位</li>
<li>eig（）：计算矩阵的特征值和特征向量</li>
<li>rank（）：计算矩阵的秩</li>
<li>trace（）：计算矩阵的迹</li>
<li>norm（）：计算矩阵的范数</li>
<li>poly（）：计算矩阵的特征方程的根</li>
<li>svd（）：矩阵的奇异值分解</li>
<li>qr（）：矩阵的QR分解</li>
<li>chol（）：矩阵的Cholesky分解</li>
<li>schur（）：矩阵的Schur分解</li>
<li>lu（）：矩阵的LU分解</li>
</ol>


<h2>符号运算</h2>

<ol>
<li>syms 符号变量名1 符号变量名2 &hellip; 符号变量名n

<ol>
<li>用这种格式定义符号变量时不要在变量名上加字符串分界符，变量间用空格而不用逗号分隔</li>
</ol>
</li>
<li>含有符号对象的表达式称为符号表达式，建立符号表达式有以下3中方法：

<ol>
<li>利用单引号来生成符号表达式</li>
<li>用sym函数建立符号表达式</li>
<li>使用已经定义的符号变量组成符号表达式
<img src="http://i.imgur.com/sjfydxI.png" alt="符号表达式创建实例" /></li>
</ol>
</li>
<li>Matlab中，数值矩阵不能直接参与符号运算，必须先转化为符号矩阵

<ol>
<li>将数值矩阵转化为符号矩阵：sym（数值矩阵）</li>
<li>将符号矩阵转化为数值矩阵：numeric（A）</li>
</ol>
</li>
<li>关于符号矩阵的函数

<ol>
<li>transpose（S）：返回S矩阵的转置矩阵</li>
<li>determ（S）：返回S矩阵的行列式值</li>
<li>许多数值矩阵的函数，如diag，triu，tril，inv，det，rank，eig等也可直接应用于符号矩阵</li>
</ol>
</li>
<li>符号表达式的四则运算

<ol>
<li>factor（S）：对S分解因式，S是符号表达式或符号矩阵</li>
<li>expand（S）：对S进行展开，S是符号表达式或符号矩阵</li>
<li>collect（S，v）：对S按变量v合并同类项，S是符号表达式或符号矩阵</li>
<li>simplify（S）：应用函数规则对S进行简化</li>
<li>simple（S）：调用MATLAB的其他函数对表达式进行综合化简，并显示化简过程</li>
</ol>
</li>
<li>常用的符号运算

<ol>
<li>limit，求极限的符号函数，常用的格式：limit（F，x，a，‘right’）或limit（F，x，a，‘left’）。当自变量x从右侧或左侧逼近a时，函数F的极值</li>
<li>diff，求微分用的符号函数，常用格式：diff（f，x，n），表示f关于x求n阶导数</li>
<li>int，求积分用的符号函数，常用格式：int（f，r，x0，x1），f为所要积分的表达式，r为积分变量，若为定积分，则x0与x1为积分上下限</li>
<li>symsum，级数求和的符号函数，常用的格式：S=symsum（fk，k，k0，kn），其中fk为级数的通项，k为级数自变量，k0和kn为级数求和的起始项和终止项，且可设为inf</li>
<li>dsolve，求解常微分方程的符号函数，常用格式：dsolve（'eqnl',&lsquo;condition&rsquo;,&lsquo;var'）;该函数求解微分方程eqnl在初始条件condition下的特解。参数var描述方程中的自变量符号，省略时按默认原则处理，若没有给出初值条件condition，则求方程的通解
<img src="http://i.imgur.com/o1KV20Q.png" alt="极限和极值的符号运算实例" />
<img src="http://i.imgur.com/Hp0qYod.png" alt="微积分的符号运算实例" />
<img src="http://i.imgur.com/sHRwiap.png" alt="常微分方程符号运算实例" /></li>
</ol>
</li>
</ol>


<h2>图形绘制</h2>

<ol>
<li>ploy,绘制二维图形，常用格式：plot(x1,y,option1,x2,y2,option2,&hellip;)</li>
<li>plot3,绘制三维图形，常用格式：plot3(x1,y1,z1,option1,x2,y2,z2,option2,&hellip;)</li>
<li>mesh,绘制三维曲面，常用格式：mesh(X,Y,Z,C),参数X,Y,Z都为矩阵值，C表示网格曲面的颜色分布。mesh(x,y,Z,C),参数x，y为长度分别是n和m的向量值，而参数Z是维数为mxn的矩阵</li>
<li>surf，绘制三维阴影曲面，常用格式：surf(X,Y,Z,C),surf(x,y,Z,C)
<img src="http://i.imgur.com/pZGpcxE.png" alt="三维网格曲面图绘制应用实例" />
<img src="http://i.imgur.com/0hS4l6O.png" alt="绘图命令使用实例" /></li>
</ol>


<h2>MATLAB程序</h2>

<p><img src="http://i.imgur.com/xWXusd3.png" alt="MATLAB程序基本组成结构" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-11-11T22:45:49+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/11/10/uml-knowledges/">
		
			UML-Knowledges</a>
	</h2>
	<div class="entry-content">
		<h2>StarUML 软件破解</h2>

<ol>
<li><a href="http://staruml.io">官网地址</a></li>
<li>该软件为跨平台的UML建模工具，采用NodeJs编写</li>
<li>破解：安装目录/www/license/node/LicenseManagerDomain.js文件修改为如下：</li>
</ol>


<figure class='code'><figcaption><span>LicenseManagerDomain.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">NodeRSA</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node-rsa&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">validate</span><span class="p">(</span><span class="nx">PK</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">product</span><span class="p">,</span> <span class="nx">licenseKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">pk</span><span class="p">,</span> <span class="nx">decrypted</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;morris&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">product</span><span class="o">:</span> <span class="s2">&quot;StarUML&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">licenseType</span><span class="o">:</span> <span class="s2">&quot;vip&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">quantity</span><span class="o">:</span> <span class="s2">&quot;suda_morris.github.io&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">licenseKey</span><span class="o">:</span> <span class="s2">&quot;later equals never!&quot;</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>        <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">pk</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NodeRSA</span><span class="p">(</span><span class="nx">PK</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">decrypted</span> <span class="o">=</span> <span class="nx">pk</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">licenseKey</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">terms</span> <span class="o">=</span> <span class="nx">decrypted</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="nx">terms</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">product</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">product</span><span class="o">:</span> <span class="nx">product</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">licenseType</span><span class="o">:</span> <span class="nx">terms</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span class='line'>                <span class="nx">quantity</span><span class="o">:</span> <span class="nx">terms</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span class='line'>                <span class="nx">licenseKey</span><span class="o">:</span> <span class="nx">licenseKey</span>
</span><span class='line'>            <span class="p">};</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Initializes the domain with several commands.</span>
</span><span class='line'><span class="cm">     * @param {DomainManager} domainManager The DomainManager for the server</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">init</span><span class="p">(</span><span class="nx">domainManager</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">domainManager</span><span class="p">.</span><span class="nx">hasDomain</span><span class="p">(</span><span class="s2">&quot;LicenseManager&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">domainManager</span><span class="p">.</span><span class="nx">registerDomain</span><span class="p">(</span><span class="s2">&quot;LicenseManager&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">major</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">minor</span><span class="o">:</span> <span class="mi">1</span><span class="p">});</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nx">domainManager</span><span class="p">.</span><span class="nx">registerCommand</span><span class="p">(</span>
</span><span class='line'>            <span class="s2">&quot;LicenseManager&quot;</span><span class="p">,</span> <span class="c1">// domain name</span>
</span><span class='line'>            <span class="s2">&quot;validate&quot;</span><span class="p">,</span>       <span class="c1">// command name</span>
</span><span class='line'>            <span class="nx">validate</span><span class="p">,</span>         <span class="c1">// command handler function</span>
</span><span class='line'>            <span class="kc">false</span><span class="p">,</span>            <span class="c1">// this command is synchronous in Node (&quot;false&quot; means synchronous&quot;)</span>
</span><span class='line'>            <span class="s2">&quot;Validate License&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="p">[</span>
</span><span class='line'>                <span class="p">{</span>
</span><span class='line'>                    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;PK&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;PK&quot;</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="p">{</span>
</span><span class='line'>                    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;name of license owner&quot;</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="p">{</span>
</span><span class='line'>                    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;product&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;product name&quot;</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="p">{</span>
</span><span class='line'>                    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;licenseKey&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;license key&quot;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">],</span>
</span><span class='line'>            <span class="p">[</span>
</span><span class='line'>                <span class="p">{</span>
</span><span class='line'>                    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="c1">// return values</span>
</span><span class='line'>                    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;result&quot;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">]</span>
</span><span class='line'>        <span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">exports</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="nx">init</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">}());</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>打开软件，，help->Enter License,随便输入用户名密码即可破解成功</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-11-10T15:44:29+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/11/09/c++Primer/">
		
			Review C++</a>
	</h2>
	<div class="entry-content">
		<h2>补码的好处</h2>

<ol>
<li>0的表示唯一</li>
<li>符号位可以直接参与运算</li>
</ol>


<h2>常用的I/O流类库操纵符</h2>

<ol>
<li>dec：数值数据采用十进制表示</li>
<li>hex：数值数据采用十六进制表示</li>
<li>oct： 数值数据采用八进制表示</li>
<li>ws：  提取空白符</li>
<li>endl：插入换行符，并刷新流</li>
<li>ends： 插入空字符</li>
<li>setsprecision(int)： 设置浮点数的小数位数（包括小数点）</li>
<li>setw(int)： 设置域宽</li>
</ol>


<h2>类型别名</h2>

<ol>
<li>typedef 已有类型名 新类型名</li>
<li>using 新类型名 = 已有类型名</li>
</ol>


<h2>auto类型与decltype类型</h2>

<ol>
<li>auto：编译器通过初始值自动推断变量的类型</li>
<li>decltype：定义一个变量与某一表达式的类型相同，但并不用该表达式初始化变量

<ol>
<li>decltype（i） j=2,表示j以2作为初始值，类型与i一致</li>
</ol>
</li>
</ol>


<h2>引用类型</h2>

<ol>
<li>引用（&amp;）是标识符的别名

<ol>
<li>int i；int &amp;ri = i；</li>
</ol>
</li>
<li>定义一个引用时，必须同时对它初始化，使它指向一个已存在的对象</li>
<li>一旦一个引用被初始化后，就不能改为指向其它对象</li>
</ol>


<h2>泛型编程</h2>

<ol>
<li>泛型编程是C++支持的另一种编程模式，指的是创建独立于类型的代码</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-11-09T18:08:50+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/11/05/lcd/">
		
			LCD</a>
	</h2>
	<div class="entry-content">
		<h2>TFTLCD驱动芯片</h2>

<ul>
<li>ILI9341、ILI9325、RM68042、RM68021、ILI9320、ILI9328、LGDP4531、SSD1289等</li>
</ul>


<h2>ILI9341</h2>

<ol>
<li>自带显存，其显存总大小为172800（240X320X18/8），即18位模式下（26万色）的显存量。在16位模式下，ILI9341采用RGB565格式存储颜色数据</li>
<li>ILI9341所有的指令都是8位的，高8位无效，且参数除了读写GRAM的时候是16位，其他操作参数都是8位的。这个和ILI9320等驱动器不一样</li>
<li>命令

<ol>
<li>0xD3，这个是读ID4指令，用于读取LCD控制器的ID，这可以用来判断所用的LCD驱动器是什么型号，这样就可以根据控制器的型号去执行对应驱动IC的初始化代码。0xD3指令后跟了4个参数，最后2个参数读出来是0x93和0x41</li>
<li>0x36，这个是存储访问控制指令，可以控制ILI9341存储器的读写方向。简单说木九十在连续写GRAM的时候，可以控制GRAM指针增长的方向，从而控制显示方式。0x36指令后面紧跟一个参数，用来设置GRAM自增方式</li>
<li>0x2A，这是列地址设置指令，在从左到右、从上到下的扫描方式（默认）下面，该指令用于设置横坐标（x坐标）。该指令带有4个参数，实际上是2个坐标值：SC和EC，即列地址的起始值和结束值，SC必须小于等于EC。一般在设置x坐标的时候，我们只需要带2个参数即可，也就是设置SC即可，因为EC没有变化，我们只需要设置一次即可（在初始化ILI9341的时候设置）</li>
<li>0x2B，是页地址设置指令，在从左到右、从上到下的扫描方式（默认）下面，该指令用于设置纵坐标（y坐标）</li>
<li>0x2C，该指令是写GRAM指令，在发送该指令之后，我们便可以网LCD的GRAM里面写入颜色数据了。该指令支持连续写。ILI9341在收到0x2C指令之后，数据有效位宽变为16位，我们可以连续写入LCD GRAM值，而GRAM的地址将根据MY/MX/MV设置的扫描方式进行自增。</li>
<li>0x2E，该指令是读GRAM指令，用于读取ILI9341的显存GRAM。ILI9341在收到该指令后，第一次输出的是dummy数据，也就是无效的数据，第二次开始读取到的才是有效的GRAM数据（从坐标SC、SP开始），输出规律为：每个颜色分量占8位，一次输出2个颜色分量。比如第一次输出的是R1G1，随后的规律为B1R2->G2B2->R3G3->B3R4->G4B4->R5G5&hellip;以此类推。</li>
</ol>
</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-11-05T10:19:01+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/11/04/ov7670/">
		
			CMOS图像传感器OV7670</a>
	</h2>
	<div class="entry-content">
		<h2>OV7670简介</h2>

<ol>
<li>通过SCCB总线控制，可以输出整帧、子采样、取窗口等方式及各种分辨率的8位影响数据。VGA图像最高达到30帧/秒。用户可以完全控制图像质量、数据格式和传输方式</li>
<li>具有自动曝光控制、自动增益控制、自动白平衡，自动消除灯光条纹、自动黑电平校准等自动影像控制功能</li>
<li>支持VGA、GIF和从CIF到40X30的各种尺寸。</li>
<li>所有图像处理功能过程包括伽马曲线、白平衡、饱和度、色度等都可以通过SCCB接口编程。</li>
<li>OV7670 CMOS图像传感器通过减少或消除光学或电子缺陷（如固定图案噪声、拖尾、浮散等），提高图像质量，得到清晰的稳定的彩色图像</li>
<li>OV7670芯片内部有：感光阵列、模拟信号处理模块（包括自动增益和自动白平衡）、10位的ADC、测试图案发生器（八色彩条图案渐变至黑白色条图案）、数字信号处理器（控制由原始信号差值到RGB信号的过程，并控制边缘锐化、颜色空间转换等图像质量处理）、图像缩放模块（按照预先设置的要求输出数据格式）、时许发生模块（产生阵列控制和帧率、帧率的时序、自动曝光控制、输出外部时序）、数字视频端口、SCCB接口、LED和闪光灯输出控制电路等</li>
</ol>


<h2>OV7670参数</h2>

<ol>
<li>感光阵列：640*480</li>
<li>稳定工作温度0~50℃</li>
<li>输出格式：

<ol>
<li>YUV/YCbCr4:2:2</li>
<li>RGB565/555/444</li>
<li>GRB4:2:2</li>
<li>Raw RGB Data</li>
</ol>
</li>
<li>光学尺寸：1/6″</li>
<li>视场角：25°</li>
<li>最大帧率：VGA30 f/s</li>
</ol>


<h2>视频帧存储器AL422B简介</h2>

<ol>
<li>AL422B是一个存储容量为3Mb的视频帧存储器，能够配置为384KB（393，216）X8b FIFO，支持VGA、CCIR、NTSC、PAL和HDTV分辨率</li>
<li>具有独立的读写操作能力，读/写周期时间为20ns，访问时间为15ns，具有高速异步串行存取、输出使能控制、自行刷新数据等功能。</li>
<li>目前1帧图像信息通常包含640X480或者720X480字节。</li>
<li>操作过程：

<ol>
<li>初始化。上电后，分别给nWRST和nRRST各0.1ms的初始化脉冲，使AL422B初始化。</li>
<li>复位操作。通常，复位信号可在任何时候给出而不考虑nWE，nRE以及nOE的状态，但是它们仍然要参照时钟信号的输入情况，使它们满足建立时间和保持时间的要求。如果在禁止时钟周期内给给出复位信号，必须等到允许周期到来后才会执行复位操作。当nWRST和nRRST均为低电平时，数据的输入和输出均从地址0开始</li>
<li>写操作。当写使能信号nWE为低电平时，在WCK信号的上升沿，数据通过DI7~DI0写入寄存器，参照WCK的输入周期，写入的数据必须满足建立时间和保持时间的要求。当nWE为高电平时，写操作被禁止，写地址指针停在当前位置上；当nWE再次变为低电平时，写地址指针从当前位置继续开始</li>
<li>读操作。当读使能nRE和数据输出使能nOE均为低电平时，在RCK信号的上升沿，数据由DO7~DO0输出。当nRE为高电平时，读地址指针停在当前位置上；当nRE再次变为低电平时，读地址指针从当前位置开始。执行读操作时，nOE须为低电平，如nOE为高电平，则数据输出端均为高阻态，且读地址指针任然同步加1.nRE和nOE须参照RCK的输入周期，满足建立时间和保持时间的要求。</li>
</ol>
</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-11-04T20:19:43+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/10/30/sd-card-driver/">
		
			SD卡与文件系统</a>
	</h2>
	<div class="entry-content">
		<h2>Micro SD卡简介</h2>

<p><img src="http://i.imgur.com/baGsEky.jpg" alt="SD卡" /></p>

<ol>
<li>Micro SD卡的控制指令功能强大，支持SPI、SDIO模式，兼容MMC。在SPI模式下，CS/MOSI/MISO/CLK都需要加10~100K左右的上拉电阻</li>
<li>SD卡有5个寄存器

<ol>
<li>CID：128比特，卡标识寄存器,只读</li>
<li>RCA：16比特，相对卡地址寄存器，即本地系统中卡的地址，动态变化，在主机初始化的时候确定。SPI模式中没有此寄存器</li>
<li>CSD：128比特，卡描述数据，主要存储了卡的容量、数据格式、DSR寄存器是否可用、数据传输相关参数、数据传输速度、最大的数据访问时间、最大的读写数据块长度等，是可配置寄存器</li>
<li>SCR：64比特，SD配置寄存器，即SD卡特定信息数据如：SCR版本号、SD卡版本号、是否支持安全性、擦除后卡状态默认值、SD总线宽度等，由生产商在卡生产阶段写入</li>
<li>OCR：32比特，操作条件寄存器,提供SD Host查询SD卡支持的电压范围，是否是大容量卡OCR[30],卡省电过程是否结束OCR[31]</li>
</ol>
</li>
<li>每发送一个命令，SD卡都会给出一个应答，以告知主机该命令的执行情况，或者返回主机需要获取的数据。SPI模式下，SD卡针对不同的命令，应答可以是R1~R7。命令与响应都是MSB优先。除了SEND_STATUS和READ_OCR指令外，其他指令的响应格式都是R1，格式R1的长度是1Byte，并且最高位总是0，其余每位均是错误提示，在指令接收过程中发生了什么样的错误，对应的错误位就会是‘1’。R1b和R1具有相同的格式，它将伴随一个附加的busy信号，busy信号的长度可以是任意个字节，全0表示卡处在“忙”的状态。格式R2的长度为2字节，它是指令SEND_STATUS的响应，它的高字节和R1相同，低字节同样作为状态提示。格式R3的长度是5字节，它是指令READ_OCR的响应，最高字节和R1相同，其余4字节包含SD卡的OCR寄存器信息</li>
<li>在SD卡收到复位命令（CMD0）时，CS为低电平则SD卡的SPI模式被启用。不过在发送CMD0之前，要发送>74个时钟这是因为SD卡内部有一个供电电压上升时间，大概为64个CLK，剩下的10个CLK用于SD卡同步，之后才能开始CMD0的操作。在卡初始化的时候，CLK时钟最大不能超过400KHz</li>
<li>对SD卡的常用基本操作主要由：单块读、连续读、单块写、连续写。SPI模式下，通过向SD卡发送响应的命令并读取相应的响应来实现对SD卡的控制。</li>
</ol>


<h2>SD 命令</h2>

<ol>
<li>命令:每个命令都有一个起始位和结束位，总长度为48 bits，并且每个命令都有 7 bits 的CRC 校验码，高字节优先传输
<img src="http://i.imgur.com/sDb6XU5.jpg" alt="SD Command" /></li>
<li>Command 共分为12类（class0 - class11），在寄存器CSD中有12 bits CCC（Card Command Class）对本卡支持的分类进行描述
<img src="http://i.imgur.com/2QG9Ein.jpg" alt="SD命令" /></li>
<li>几个重要的命令
<img src="http://i.imgur.com/Xh1BWEV.png" alt="常用命令" /></li>
<li>CMD8命令格式
<img src="http://i.imgur.com/9oboqjq.jpg" alt="CMD8" /></li>
</ol>


<h2>SD 应答</h2>

<ol>
<li>R1响应格式
<img src="http://i.imgur.com/ZYbXuth.png" alt="R1响应格式" /></li>
</ol>


<h2>SD卡初始化</h2>

<p><img src="http://i.imgur.com/ccW4YbS.jpg" alt="SD卡初始化流程" /></p>

<ol>
<li>配置时钟，慢速一般为400Hz，设置工作模式</li>
<li>发送CMD0，对卡进行软复位，进入空闲态，该指令没有反馈</li>
<li>发送CMD8命令用于读取卡的接口信息，如果是SD2.0，则支持CMD8命令；如果是SD1.x，MMC，则不支持CMD8</li>
<li>发送CMD55+ACMD41，判断当前电压是否在卡的工作范围内，看卡能否识别命令，如果是MMC卡，则CMD55不能被识别，短反馈</li>
<li>发送CMD2，验证SD卡是否接入，长反馈</li>
<li>发送CMD3，读取SD卡的RCA地址，短反馈</li>
<li>以RCA作为参数，发送CMD9读取CSD，长反馈</li>
<li>发送CMD7，选中要操作的SD卡，短反馈</li>
<li>配置告诉时钟，准备数据传输，一般为20~25MHz</li>
<li>设置工作模式：DMA、中断或者查询模式</li>
</ol>


<h2>SD卡读取数据流程</h2>

<ol>
<li>发送CMD17</li>
<li>接收卡响应R1</li>
<li>接收数据起始令牌0xFE</li>
<li>接收数据</li>
<li>接收2字节的CRC，如果不使用CRC，这两个字节在读取后可以丢掉</li>
<li>禁止片选之后，发多8个CLK</li>
</ol>


<h2>SD卡写数据流程</h2>

<ol>
<li>发送CMD24</li>
<li>接收卡响应R1</li>
<li>发送写数据起始令牌0xFE</li>
<li>发送数据</li>
<li>发送2字节的伪CRC</li>
<li>禁止片选之后，发多8个CLK</li>
</ol>


<h2>SD卡读数据块操作</h2>

<ol>
<li>在读数据块模式下，数据传输的基本单元是数据块，它的大小在CSD中（READ_BL_LEN）定义</li>
<li>为了保证数据传输的正确，每个数据块后都有一个CRC校验码。</li>
<li>CMD17（Read_Single_Block）启动一次读数据块操作，在传输结束后返回返回到发送状态。</li>
<li>CMD18（Read_Multiple_Block）启动一次连续多个数据块的读操作</li>
<li>主机可以在多数据块读操作的任何时候终止操作，而不管操作的类型。发送停止传输命令即可终止操作</li>
<li>如果在多数据块读操作中，卡检测到错误（如越界，地址错位或内部错误），它将停止数据传输并仍处于数据状态；此时主机必须发送停止传输命令，终止操作</li>
</ol>


<h2>FATFS简介</h2>

<ol>
<li>FATFS是一个完全免费开源的FAT文件系统模块，专门为小型的嵌入式系统而设计。支持FAT12、FAT16和FAT32，支持多个存储媒介；有独立的缓冲区，可以对多个文件进行读/写。</li>
<li>拥有多种配置选项：

<ol>
<li>支持多卷（物理驱动器或分区，最多10个卷）</li>
<li>多个ANSI/OEM代码页包括DBCS</li>
<li>支持长文件名、ANSI/OEM或Unicode</li>
<li>支持RTOS</li>
<li>支持多种扇区大小</li>
<li>只读、最小化的API和I/O缓冲区等</li>
</ol>
</li>
<li>需要我们编写移植代码的是FATFS模块提供的底层接口，包括存储媒介读/写接口(disk I/O)和供给文件创建修改时间的实时时钟

<ol>
<li>ffconf.h:FATFS模块配置文件</li>
<li>ff.h:FATFS和应用模块共用的包含文件</li>
<li>ff.c:FATFS模块</li>
<li>diskio.h:FATFS和disk I/O模块共用的包含文件</li>
<li>interger.h:数据类型定义</li>
<li>option：可选的外部功能(比如支持中文等)</li>
<li>diskio.c:FATFS和disk I/O模块接口层文件</li>
</ol>
</li>
<li>ffconf.h

<ol>
<li>_CODE_PAGE,根据具体使用的而语言在ffconf.h中定义具体的宏定义。如果使用简体中文，则选择936；如果使用英文，则选择437；如果使用日文，则选择932。打开option文件夹，打开cc936.c文件，里面有一个很大的数组static const WCHAR uni2oem[]。这个数组用于unicode码和OEM码之间的相互转换。接下来又有两个函数，ff_convert()和ff_wtoupper()具体执行码型转换和将字符串转换为大写。unicode是一种双字节字符编码，无论中文还是英文，或者其他语言统一到2字节。与现有的任何编码都不兼容。WindowsNT的内核即使用该编码，所有数据进入内核前转换成UNICODE，退出内核后再转换成版本相关的编码(通常称为OEM，在简体中文下即为GB)</li>
<li>_FS_TINY，使用浓缩版的FATFS就设置为1</li>
<li>_FS_READONLY,这个用来配置是不是只读</li>
<li>_USE_STRFUNC,这个用来设置是否支持字符串类操作，比如f_putc,f_puts等</li>
<li>_USE_MKFS,这个用来设置是否使能格式化</li>
<li>_USE_FASTSEEK，这个用来使能快速定位</li>
<li>_USE_LABEL,这个用来设置是否支持磁盘盘符（磁盘名字）读取与设置</li>
<li><em>USE_LFN,该选项用于设置是否支持长文件名，还需要</em>CODE_PAGE支持，取值范围为0~3。0表示不支持长文件名，1~3是支持长文件名，但是存储地方不一样</li>
<li>_VOLUMES,用于设置FATFS支持的逻辑设备数目</li>
<li>_MAX_SS,扇区缓冲的最大值，一般设置为512</li>
</ol>
</li>
<li>ff.h中的函数定义

<ol>
<li>FRESULT f_mount (FATFS<em> fs, const TCHAR</em> path, BYTE opt);加载文件系统

<ul>
<li>fs表示文件系统对象，path表示本地设备驱动号，opt=1表示立即挂载，0表示延迟挂载</li>
</ul>
</li>
<li>FRESULT f_lseek (FIL* fp, DWORD ofs);移动文件的读写指针

<ul>
<li>ofs表示文件偏移量的数目</li>
</ul>
</li>
<li>FRESULT f_close (FIL* fp);关闭打开的文件对象</li>
<li>FRESULT f_opendir (DIR<em> dp, const TCHAR</em> path);打开目录，返回目录对象</li>
<li>FRESULT f_readdir (DIR<em> dp, FILINFO</em> fno);读取目录获得文件信息</li>
<li>FRESULT f_stat (const TCHAR<em> path, FILINFO</em> fno);读取文件的状态</li>
<li>FRESULT f_getfree (const TCHAR<em> path, DWORD</em> nclst, FATFS** fatfs);获取驱动器上的空闲簇数</li>
<li>FRESULT f_truncate (FIL* fp);截断文件</li>
<li>FRESULT f_sync (FIL* fp);刷新写文件的缓冲数据</li>
<li>FRESULT f_unlink (const TCHAR* path);删除目录中的一个文件</li>
<li>FRESULT f_mkdir (const TCHAR* path);创建一个新目录</li>
<li>FRESULT f_chmod (const TCHAR* path, BYTE attr, BYTE mask);更改文件/目录的属性</li>
<li>FRESULT f_utime (const TCHAR<em> path, const FILINFO</em> fno);更改文件/目录的时间戳</li>
<li>FRESULT f_rename (const TCHAR<em> path_old, const TCHAR</em> path_new);重命名/移动文件或目录</li>
<li>FRESULT f_forward (FIL<em> fp, UINT(</em>func)(const BYTE<em>,UINT), UINT btf, UINT</em> bf);转发数据流</li>
<li>FRESULT f_mkfs (const TCHAR* path, BYTE sfd, UINT au);在驱动器上创建一个文件系统</li>
<li>FRESULT f_chdir (const TCHAR* path);改变当前目录</li>
<li>FRESULT f_chdrive (const TCHAR* path);更改当前驱动器</li>
<li>int f_putc (TCHAR c, FIL* fp);</li>
<li>int f_puts (const TCHAR<em> str, FIL</em> cp);</li>
<li>int f_printf (FIL<em> fp, const TCHAR</em> str, &hellip;);</li>
<li>TCHAR<em> f_gets (TCHAR</em> buff, int len, FIL* fp);</li>
</ol>
</li>
<li>diskio.c(需要用户提供如下几个函数接口)

<ol>
<li>DSTATUS disk_initialize (BYTE pdrv);初始化磁盘驱动器</li>
<li>DSTATUS disk_status (BYTE pdrv);获取磁盘状态</li>
<li>DRESULT disk_read (BYTE pdrv, BYTE* buff, DWORD sector, UINT count);读扇区</li>
<li>DRESULT disk_write (BYTE pdrv, const BYTE* buff, DWORD sector, UINT count);写扇区</li>
<li>DRESULT disk_ioctl (BYTE pdrv, BYTE cmd, void* buff);设备相关的控制特性</li>
<li>get_fattime获取当前时间</li>
</ol>
</li>
<li>簇：文件数据分配的基本单位</li>
<li>FAT文件系统依次应该为:引导扇区、文件分配表两个、根目录区和数据区</li>
</ol>


<h2>汉字字库</h2>

<ol>
<li>常用的汉字内码系统有GB2312，GB13000，GBK，BIG5（繁体）等几种，其中GB2312支持的汉字仅有几千个，很多时候不够用，而GBK内码不仅完全兼容GB2312，还支持繁体字，总汉字数量达到2万多个。</li>
<li>每个GBK码由2字节组成，第一个字节为0X81~0xFE，第二个字节分为两部分，一是0x40~0x7E，二是0x80~0xFE。第一个字节代表的意义称为区，GBK里面总共有126个区，每个区内有190个汉字。</li>
<li></li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-10-30T16:58:07+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/10/26/frdm-kl02z/">
		
			FRDM_KL02Z</a>
	</h2>
	<div class="entry-content">
		<h2>FRDM_KL02Z开发板简介</h2>

<ol>
<li>MKL02Z32VFM4 MCU – 48 MHz、32 KB闪存、4 KB SRAM、32QFN</li>
<li>电容滑动触摸传感板，MMA8451Q加速度传感器，三色LED</li>
<li>新型OpenSDA调试接口：

<ol>
<li>大容量存储设备闪存编程接口(默认)；无需安装任何工具即可评估演示应用</li>
<li>P&amp;E调试接口具有运行控制调试功能并兼容IDE工具</li>
<li>CMSIS-DAP接口：面向嵌入式调试接口的ARM新标准</li>
</ol>
</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-10-26T15:51:29+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/10/26/stm32-l4/">
		
			STM32_L4</a>
	</h2>
	<div class="entry-content">
		<h2>STM32L4系列超低功耗微控制器简介</h2>

<ol>
<li>最高主频80MHz，凭借带有DSP和浮点单元（FPU）的ARM® Cortex®-M4内核扩展了超低功耗产品系列及其性能。</li>
<li>提供USB（支持OTG2.0全速，LPM和BCD）</li>
<li>带有LCD驱动（4X44或8X40，带有升压转换器）</li>
<li>存储器范围可以利用SDIO、Quad SPI和FSMC接口轻松扩展</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-10-26T14:54:05+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/10/18/short-news-and-knowledges/">
		
			碎片阅读</a>
	</h2>
	<div class="entry-content">
		

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-10-18T11:10:22+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/10/16/neo-m8n/">
		
			NEO-M8N</a>
	</h2>
	<div class="entry-content">
		<h2>NEO-M8N模块</h2>

<ol>
<li>内嵌USB转串口功能</li>
<li>三维位置定位</li>
<li>测速</li>
<li>授时</li>
<li>MAXIM公司20.5dB高增益LNA芯片</li>
<li>应用场合：

<ol>
<li>语音报站</li>
<li>航模，飞控，无人机</li>
<li>同步授时</li>
<li>汽车导航</li>
</ol>
</li>
<li>接收制式：

<ol>
<li>GPS</li>
<li>GLONASS</li>
<li>Galileo</li>
<li>BeiDou</li>
<li>QZSS</li>
<li>SBAS</li>
</ol>
</li>
<li>72路接收通道</li>
<li>水平定位精度：2米（空旷地）</li>
<li>输出频率1Hz~10Hz</li>
<li>速度精度：0.1m/s</li>
<li>加速度精度：0.1m/s2</li>
<li>最大高度18000米，最大速度515m/s</li>
<li>最大加速度4g</li>
<li>基于UBX协议进行模块的配置</li>
<li>IIC接口的SDA与SCL已经内部接了上拉电阻</li>
</ol>


<h2>XH414法拉电容</h2>

<ol>
<li>参数:3.3V 0.07F</li>
<li>功能和锂电池一样，在主电源掉电的时候可以为GPS模块的RTC部分供电，以使GPS模块在下次启动时能快速搜索到卫星，一般可维持供电1小时</li>
</ol>


<h2>NMEA-0183协议</h2>

<ol>
<li>NMEA是美国国家海洋电子协会为海用电子设备指定的标准格式，目前已经成为了GPS导航设备统一的RTCM标准协议</li>
<li>NMEA-0183是一套定义接收机输出的标准信息，有几种不同的二格式，每种都是独立相关的ASCII，使用逗号隔开数据，数据流长度30-100字符不等，通常以每秒间隔选择输出，最常用的格式为“GGA”，它包含了定位时间，纬度，经度，高度，定位所用的卫星数，DOP值，差分状态和校正时段，其他的有速度，跟踪，日期等。</li>
<li>NMEA-0183常用语句格式说明：

<ol>
<li>$GPGGA:全球定位数据，最大帧长72</li>
<li>$GPGSA：卫星PRN数据，最大帧长65</li>
<li>$GPGSV：卫星状态信息，最大帧长210</li>
<li>$GPRMC：推荐最小数据，最大帧长70</li>
<li>$GPVTG：地面速度信息，最大帧长34</li>
<li>$GPGLL：大地坐标信息</li>
<li>$GPZDA：UTC时间和日期</li>
</ol>
</li>
<li>协议帧总说明：该协议采用ASCII码。帧格式形如：$aacc,dd,dd,&hellip;,ddd*hh<CR><LF>

<ol>
<li>$表示帧命令起始位</li>
<li>aaccc表示地址域，前两位是标识符，后三位为语句名</li>
<li>ddd&hellip;ddd表示数据</li>
<li>*表示校验和前缀</li>
<li>hh表示校验和，$与*之间所有字符ASCII码的校验和(各字节做异或运算，得到校验和后，再转换16进制格式的ASCII字符)</li>
<li><CR><LF>表示回车和换行</li>
</ol>
</li>
<li>GPGGA：GPS固定数据输出语句

<ol>
<li>格式：$GPGGA,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>,<13>,<14>*<15><CR><LF></li>
<li>例子：$GPGGA,092725.00,4717.11399,N,00833.91590,E,1,8,1.01,499.6,M,48.0,M,,0*5B</li>
<li><1>UTC时间，格式为hhmmss.sss</li>
<li><2>纬度，格式ddmm.mmmm</li>
<li><3>纬度半球，N或者S</li>
<li><4>经度，格式ddmm.mmmm</li>
<li><5>经度半球，E或W</li>
<li><6>定位质量指标，0=定位无效，1=标准定位，2=差分定位，6=估算</li>
<li><7>使用卫星数量，从00到12</li>
<li><8>水平精确度，0.5到99.9</li>
<li><9>天线离海平面的高度，-9999.9到9999.9米</li>
<li><10>高度单位，M表示单位米</li>
<li><11>大地椭球面相对海平面的高度</li>
<li><12>高度单位，M表示单位米</li>
<li><13>差分GPS数据期限（RTCM SC-104），最后设立RTCM传送的秒数量</li>
<li><14>差分参考基站标号，从0000到1023</li>
<li><15>校验和</li>
</ol>
</li>
<li>GPGSA：GPS精度指针及使用卫星

<ol>
<li>格式：$GPGSA,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>,<13>,<14>,<15>,<16>,<17>*<18><CR><LF></li>
<li>例子：$GPGSA,A,3,23,29,07,08,09,18,26,28,,,,,1.94,1.18,1.54*0D</li>
<li><1>模式2：M=手动，A=自动</li>
<li><2>模式1：定位型式1=未定位，2=二维定位，3=三维定位</li>
<li><3>第1信道正在使用的卫星PRN码编号(Pseudo Random Noise，伪随机噪声吗)，01至32</li>
<li><4> 第2信道正在使用的卫星PRN码编号</li>
<li><5> 第3信道正在使用的卫星PRN码编号</li>
<li><6> 第4信道正在使用的卫星PRN码编号</li>
<li><7> 第5信道正在使用的卫星PRN码编号</li>
<li><8> 第6信道正在使用的卫星PRN码编号</li>
<li><9> 第7信道正在使用的卫星PRN码编号</li>
<li><10> 第8信道正在使用的卫星PRN码编号</li>
<li><11> 第9信道正在使用的卫星PRN码编号</li>
<li><12> 第10信道正在使用的卫星PRN码编号</li>
<li><13> 第11信道正在使用的卫星PRN码编号</li>
<li><14> 第12信道正在使用的卫星PRN码编号</li>
<li><15> PDOP综合位置精度因子（0.5 - 99.9）</li>
<li><16> HDOP水平精度因子（0.5 - 99.9）</li>
<li><17> VDOP垂直精度因子（0.5 - 99.9）</li>
<li><18> 校验和</li>
</ol>
</li>
<li>GPGSV：可视卫星状态输出语句

<ol>
<li>格式：：$GPGSV, <1>,<2>,<3>,<4>,<5>,<6>,<7>,&hellip;,<4>,<5>,<6>,<7>*<8><CR><LF></li>
<li>例子：$GPGSV,3,1,10,23,38,230,44,29,71,156,47,07,29,116,41,08,09,081,36*7F</li>
<li><1> 总的GSV语句电文数</li>
<li><2> 当前GSV语句号</li>
<li><3> 可视卫星总数，00至12</li>
<li><4> 卫星编号，01至32</li>
<li><5> 卫星仰角，00至90度</li>
<li><6> 卫星方位角，000至359度。实际值</li>
<li><7> 信噪比（C/No），00至99dB；无表示未接收到讯号</li>
<li><8> 校验和。</li>
<li>每条语句最多包括四颗卫星的信息，每颗卫星的信息有四个数据项，即：卫星编号，卫星仰角，卫星方位角，信噪比</li>
</ol>
</li>
<li>GPRMC：推荐最小数据量的GPS信息

<ol>
<li>格式：$GPRMC,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>*<13><CR><LF></li>
<li>例子：$GPRMC,083559.00,A,4717.11437,N,00833.91522,E,0.004,77.52,091202,,,A*57</li>
<li><1> UTC（Coordinated Universal Time）时间，hhmmss（时分秒）格式</li>
<li><2> 定位状态，A=有效定位，V=无效定位</li>
<li><3> Latitude，纬度ddmm.mmmm（度分）格式（前导位数不足则补0）</li>
<li><4> 纬度半球N（北半球）或S（南半球）</li>
<li><5> Longitude，经度dddmm.mmmm（度分）格式（前导位数不足则补0</li>
<li><6> 经度半球E（东经）或W（西经）</li>
<li><7> 地面速率（000.0~999.9节，Knot，前导位数不足则补0）</li>
<li><8> 地面航向（000.0~359.9度，以真北为参考基准，前导位数不足则补0）</li>
<li><9> UTC日期，ddmmyy（日月年）格式</li>
<li><10> Magnetic Variation，磁偏角（000.0~180.0度，前导位数不足则补0）</li>
<li><11> Declination，磁偏角方向，E（东）或W（西）</li>
<li><12> Mode Indicator，模式指示（仅NMEA0183 3.00版本输出，A=自主定位，D=差分，E=估算，N=数据无效）</li>
<li><13> 校验和。</li>
</ol>
</li>
<li>GPVTG：地面速度信息

<ol>
<li>格式：$GPVTG,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>*<10><CR><LF></li>
<li>例子：$GPVTG,77.52,T,,M,0.004,N,0.008,K,A*06</li>
<li><1> 以真北为参考基准的地面航向</li>
<li><2> T，表示“真”</li>
<li><3> 以磁北为参考基准的地面航向</li>
<li><4> M，表示“磁场”</li>
<li><5> 地面速率</li>
<li><6> N，表示“节”</li>
<li><7> 地面速率</li>
<li><8> K，表示“千米/小时”</li>
<li><9> 模式指示（A=自主定位，D=差分，E=估算，N=数据无效）</li>
<li><10> 校验和</li>
</ol>
</li>
<li>GPGLL：定位地理信息

<ol>
<li>格式：$GPGLL,<1>,<2>,<3>,<4>,<5>,<6>,<7>*<8><CR><LF></li>
<li>例子：$GPGLL,4717.11364,N,00833.91565,E,092321.00,A,A*60</li>
<li><1> 纬度 ddmm.mmmmm（度分）</li>
<li><2> 纬度半球 N（北半球）或 S（南半球）</li>
<li><3> 经度 dddmm.mmmmm（度分）</li>
<li><4> 经度半球 E（东经）或 W（西经）</li>
<li><5> UTC 时间：hhmmss（时分秒）</li>
<li><6> 定位状态，A=有效定位，V=无效定位</li>
<li><7> 模式指示（A=自主定位，D=差分，E=估算，N=数据无效）</li>
<li><8> 校验和</li>
</ol>
</li>
<li>GPZDA：当前时间信息

<ol>
<li>格式：$GPZDA,<1>,<2>,<3>,<4>,<5>,<6>*<7><CR><LF></li>
<li>例子：$GPZDA,082710.00,16,09,2002,00,00*64</li>
<li><1> UTC 时间：hhmmss（时分秒，格林威治时间）</li>
<li><2> 日</li>
<li><3> 月</li>
<li><4> 年</li>
<li><5> 本地区域小时（NEO-6M 不支持，为 00）</li>
<li><6> 本地区域分钟（NEO-6M不支持，为 00）</li>
<li><7> 校验和</li>
</ol>
</li>
</ol>


<h2>NMEA解码库</h2>

<ol>
<li><a href="http://nmea.sourceforge.net/">下载地址</a></li>
<li>支持解析GPGGA，GPGSA，GPGSV，GPRMC，GPVTG这五种语句，解析得到的GPS数据信息以结构体存储，附加地理学相关功能，可支持导航等数据工作，除了解析NMEA语句，它还可以根据随机数产生NMEA语句，方便模拟</li>
<li>结构体：

<ol>
<li>nmeaINFO：保存GPS解码后得到的信息,结构成员介绍

<ol>
<li>smask（int类型）接收到的GPS信息包类型</li>
<li>utc（nmeaTIME结构）包含年、月、日、时、分、秒信息，格林威治时间</li>
<li>sig（int类型）定位质量，0-无效，1-标准定位，2-差分定位</li>
<li>fix（int类型）导航模式，1-无效，2-2D,3-3D</li>
<li>PDOP（double类型）位置精度因子</li>
<li>HDOP（double类型）水平精度因子</li>
<li>VDOP（double类型）垂直精度因子</li>
<li>lat（double类型）纬度</li>
<li>lon（double类型）经度</li>
<li>elv（double类型）海拔，单位m</li>
<li>speed（double类型）速度，单位km/h</li>
<li>direction（double类型）航向，单位：度2</li>
<li>satinfo（nameSATINFO结构）包含了可见卫星，正在使用的卫星，卫星信号等信息</li>
</ol>
</li>
<li>nmeaPARSER：解码时使用的缓冲区数据结构。它是一个链表，在解码时，NMEA库会把输入的GPS原始数据压入到nmeaPARSE结构的链表中</li>
</ol>
</li>
<li>函数：

<ol>
<li>nmea_zero_INFO(&amp;info);初始化解码后的数据</li>
<li>nmea_parse_init(&amp;parser);初始化解析使用的数据结构</li>
<li>nmea_parse(&amp;parser,&amp;buff[0],size,&amp;info);</li>
<li>GMTconvert(&amp;info.utc,&amp;beiJingTime,8,1);</li>
<li>nmea_parser_destory(&amp;parser);释放GPS数据结构</li>
</ol>
</li>
</ol>


<h2>u-center软件</h2>

<ol>
<li>具有配置模块工作方式的功能，方便开发调试</li>
<li>对GPS模块进行性能测试</li>
<li>更新GPS模块固件</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-10-16T09:06:12+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">

</div>
	
</div>
</article>

<nav id="pagenavi">
    
        
            <a href="/posts/2" class="prev">Prev</a>
        
    
    
        <a href="/posts/4" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    suda-morris

Powered by Octopress-WenRis Group
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>